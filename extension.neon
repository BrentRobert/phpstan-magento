parameters:
	magento:
		checkCollectionViaFactory: true
		checkServiceContracts: true
		magentoRoot: %currentWorkingDirectory%

parametersSchema:
	magento: structure([
		checkCollectionViaFactory: bool()
		checkServiceContracts: bool()
		magentoRoot: string()
	])

conditionalTags:
	bitExpert\PHPStan\Magento\Rules\AbstractModelRetrieveCollectionViaFactoryRule:
		phpstan.rules.rule: %magento.checkCollectionViaFactory%
	bitExpert\PHPStan\Magento\Rules\AbstractModelUseServiceContractRule:
		phpstan.rules.rule: %magento.checkServiceContracts%

services:
	-
		class: bitExpert\PHPStan\Magento\Type\ObjectManagerDynamicReturnTypeExtension
		tags:
			- phpstan.broker.dynamicMethodReturnTypeExtension
	-
		class: bitExpert\PHPStan\Magento\Type\TestFrameworkObjectManagerDynamicReturnTypeExtension
		tags:
			- phpstan.broker.dynamicMethodReturnTypeExtension
	-
		class: bitExpert\PHPStan\Magento\Reflection\Framework\Session\SessionManagerMagicMethodReflectionExtension
		tags:
			- phpstan.broker.methodsClassReflectionExtension
	-
		class: bitExpert\PHPStan\Magento\Reflection\Framework\DataObjectMagicMethodReflectionExtension
		tags:
			- phpstan.broker.methodsClassReflectionExtension
	-
		class: bitExpert\PHPStan\Magento\Rules\GetCollectionMockMethodNeedsCollectionSubclassRule
		tags:
			- phpstan.rules.rule
	-
		class: bitExpert\PHPStan\Magento\Rules\AbstractModelRetrieveCollectionViaFactoryRule
	-
		class: bitExpert\PHPStan\Magento\Rules\AbstractModelUseServiceContractRule
